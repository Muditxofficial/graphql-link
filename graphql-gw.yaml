# Configure the host and port the service will listen on
listen: localhost:8080

#
# Configure the GraphQL upstream servers you will be accessing
upstreams:
  anilist:
    url: https://graphql.anilist.co
    prefix: Ani
  pokemon:
    url: https://graphql-pokemon.now.sh
    prefix: Pokemon
    
types:
  - name: Query
    actions:
      # mounts the root anilist query to the anime field
      - type: mount
        field: anime
        upstream: anilist
        query: query {}

      # mounts the root pokemon query to the pokemon field
      - type: mount
        field: pokemon
        upstream: pokemon
        query: query {}

  - name: AniCharacter
    actions:
      # mounts the root anilist query to the anime field
      - type: link
        field: pokemon
        vars:
          $fullname: name { full }
        upstream: pokemon
        query: query { pokemon(name:$fullname) }
#
# The above link lets you do queries that access data from both the anilist and pokemon services. Example:
# query anime {
#   anime {
#     Character(search: "Pikachu") {
#       description
#       pokemon {
#         attacks {
#           special {
#             name
#             type
#             damage
#           }
#         }        
#       }
#     }
#   }
# }

  - name: Mutation
    actions:
      # mounts all the fields of the root anilist mutation
      - type: mount
        upstream: anilist
        query: mutation {}
